# BFF (Backend For Frontend)

### 정의

- **BFF (Backend For Frontend)** 는 클라이언트(프론트엔드)와 백엔드 시스템 사이에 존재하는 중간 계층 서버를 의미함
- BFF는 클라이언트가 직접 여러 백엔드 서비스를 호출하면서 발생하는 문제를 해결하고, 프론트엔드 개발을 보다 효율적으로 지원하기 위해 도입된 개념임

### 왜 BFF가 필요한가?

**1. MSA 환경에서 데이터 통합 및 가공**

- 과거 모놀리식 아키텍처에서는 단일 서버가 모든 데이터를 제공했지만, **MSA (Microservices Architecture)** 로 전환되면서 하나의 화면을 구성하기 위해 여러 개의 마이크로서비스를 호출해야 하는 문제가 생김

- 프론트엔드에서 각 API를 직접 호출하면 다음과 같은 문제가 발생함
  - API 호출이 많아져 네트워크 비용 증가
  - 데이터를 합치는 로직이 클라이언트에 분산되어 프론트엔드 코드 복잡도 증가

> BFF는 여러 API를 대신 호출하고 데이터를 가공하여 프론트엔드가 필요로 하는 형태로 한 번에 제공함으로써 이 문제를 해결함

**2. 플랫폼별 최적화된 응답 제공**

- 웹, 모바일 앱, 스마트 TV 등 플랫폼별 요구사항이 다름
  - 모바일은 네트워크 비용 절감을 위해 최소 데이터만 필요
  - 웹은 비교적 풍부한 데이터를 제공받아도 무방

> BFF는 요청하는 플랫폼에 맞춰 데이터를 필터링, 변환하여 최적화된 응답을 제공할 수 있음

**3. 보안 및 인증 관리**

- 클라이언트가 직접 백엔드에 접근하면 API 키 노출, 민감한 인증정보가 유출될 위험이 있음

- BFF를 통해
  - 인증 토큰 관리
  - 민감 정보 숨김

> 필요한 인증 및 권한 체크를 서버 단에서 처리하여 보안성을 높일 수 있음

**4. CORS 문제 해결**

- 클라이언트가 직접 다른 도메인의 API를 호출하면 CORS(Cross-Origin Resource Sharing) 문제가 발생할 수 있음

> BFF가 같은 도메인 상에 존재하면, 클라이언트는 BFF로 요청하고 BFF가 대신 외부 API를 호출하기 때문에 CORS 문제가 발생하지 않음

**5. 백엔드 변경에 대한 프론트엔드 영향 최소화**

- 백엔드 서비스가 변경되더라도, BFF에서만 수정하면 되므로 프론트엔드 코드 수정 없이 서비스 유지 가능함
- 즉, 프론트엔드와 백엔드의 독립성을 높여줍니다.

### BFF 아키텍처의 주요 특징

| 항목        | 설명                                                      |
| ----------- | --------------------------------------------------------- |
| 역할        | 클라이언트 요청을 받아 여러 API 호출, 데이터 가공 후 응답 |
| 목적        | 데이터 최적화, 호출 간소화, 보안 강화, 유지보수성 향상    |
| 위치        | 클라이언트와 백엔드 시스템 사이                           |
| 추가 기능   | 인증 처리, API 호출 통합, CORS 대응 등                    |
| 플랫폼 대응 | 디바이스별(웹, 모바일 등) 다른 응답 제공 가능             |

### 정리

**BFF가 제공하는 가치**

1. 프론트엔드 복잡도 감소: API 호출 통합, 데이터 가공 대행
2. 플랫폼 최적화: 각 디바이스에 맞춘 데이터 제공
3. 보안성 강화: 인증, 민감 정보 서버 측 관리
4. 유지보수성 향상: 백엔드 변경에도 프론트 영향 최소화
5. 성능 최적화: 필요 없는 네트워크 요청 제거

### 추가

**BFF는 이런 상황에서 특히 효과적임**

1. 프론트엔드 팀과 백엔드 팀이 독립적으로 일해야 할 때
2. 하나의 백엔드가 **여러 종류의 클라이언트(Web, App 등)** 를 지원해야 할 때
3. 기존 시스템(API 설계)가 복잡하거나 클라이언트 최적화가 전혀 고려되지 않은 경우
